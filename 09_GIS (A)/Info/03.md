To reduce the output file size and include only roads and railways when converting .osm.pbf with ogr2ogr, you should apply an
attribute filter on the "lines" layer to extract only features tagged as roads or railways.

Use the `-where` option with SQL-like filter expressions:

```bash
ogr2ogr -f GeoJSON filtered_lines.json wielkopolskie-251023.osm.pbf lines -where "highway IS NOT NULL OR railway IS NOT NULL"
```

This command will extract only features from the "lines" layer that have the "highway" or "railway" tag, which correspond to
roads and railways, respectively. This filtering drastically reduces the size of the output by excluding unrelated line
features.

If you want to be more specific about road types, you can refine the query, for example:

```bash
-where "highway IN ('primary', 'secondary', 'tertiary', 'residential') OR railway IS NOT NULL"
```

This approach ensures you get vector data for roads and railways from the .osm.pbf file without extraneous data, cutting down
on file size while preserving relevant transportation features.[1][2][3]

[1](https://help.openstreetmap.org/questions/68845/why-shp-dont-have-unused-railway/)
[2](https://wiki.openstreetmap.org/wiki/Osmosis) [3](https://www.scitepress.org/papers/2017/61649/61649.pdf)
[4](https://community.openstreetmap.org/t/microsoft-road-detections/7313)
[5](https://www.eurosdr.net/sites/default/files/images/inline/fonte_et_al-gecomprimeerd.pdf)
[6](https://www.sciencedirect.com/science/article/pii/S2352711025001931)
